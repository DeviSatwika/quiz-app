<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz App</title>
    <!-- <style>
        
    </style> -->
</head>
<body>
    <style>
        body{
    background-color: aliceblue;
    overflow: hidden;
    
        }
        .main{
            pointer-events: auto;

        }
        .main.active{
            filter:blur(10px);
            pointer-events:none
        }
        .header{
            position:fixed;
            top:0;
            left:0;
            width:100%;
            padding:20px  10%;
            background-color: cornflowerblue;
            display:flex;
            justify-content: space-between;
            align-items: center;
        }
        #head{
            font-family: fantasy;
            font-style: oblique;
            font-weight: 700;
            font-size: 32px;
        }
        .container{
            display:flex;
            height: 100vh;
            width:200%
        }
        .home{
            position: relative;
            left:-50%;
            height:100vh;
            width:100%;
            display:flex;
            justify-content:center;
            align-items:center;
        }
        .quiz-cont{
            max-width:500px;
            display:flex;
            align-items:center;
            flex-direction: column;
        }
        .quiz-cont h1{
            font-size:54px;
            font-weight: 500;
            text-shadow: 0 0 10px rgba(0,0,0,.3);
        }
        .quiz-cont p{
            font-size: 16px;
            text-align:center;
            text-shadow: 0 0 10px rgba(0,0,0,.3);
            margin-bottom: 30px;
        }
        .quiz-cont .select-quiz{
            width:190px;
            height:55px;
            background-color: rgb(121, 160, 231);
            border: 2px solid #fff;
            outline:none;
            border-radius:6px;
            box-shadow: 0 0 10px  rgb(179, 194, 222);
            font-size: 18px;
            color:rgb(20, 46, 95);
            letter-spacing: 1px;
            font-weight:500;
            cursor:pointer;
            transition: .5s;
        }
        .quiz-cont .select-quiz:hover{
            background-color: rgb(219, 229, 247);
            box-shadow: none;
        }
        .popup-select{
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%) scale(.9);
            width: 500px;
            background-color: rgb(198, 207, 223);
            border-radius: 6px;
            text-align: center;
            opacity: 0;
            pointer-events: none;
            transition: .3s ease;
        }
        .popup-select.active{
            opacity: 1;
            pointer-events:auto;
            transform: translate(-50%, -50%) scale(1);
        }
        .popup-select h2{
            font-size:30px;
            color:rgb(20, 46, 95);

        }
        .popup-select .selects{
            display:inline-block;
            font-size:26px;
            color:black;
            font-weight:300;
            margin:4px 0;
        }
        .popup-select select{
            font-size:20px;
            color: rgb(29, 45, 73);
            background-color: rgb(228, 231, 235);
        }
        .popup-select #but{
            width:140px;
            height:50px;
            background-color: rgb(121, 160, 231);
            border: 2px solid #fff;
            outline:none;
            border-radius:6px;
            box-shadow: 0 0 10px  rgb(179, 194, 222);
            font-size: 18px;
            color:rgb(20, 46, 95);
            letter-spacing: 1px;
            font-weight:500;
            cursor:pointer;
            transition: .5s;
            margin-top: 40px;
            margin-bottom: 60px;
        }
        .popup-select #but:hover{
            background-color: rgb(219, 229, 247);
            box-shadow: none;
        }
        /* .popup-select .exit{
            
            margin-right:20px;
        } */
        .quiz-section{
            position: relative;
            left:-60%;
            width:100%;
            background-color:cornflowerblue;
            transition: .8s ease-in-out;
        }
        .quizSection.active{
            left:0;


        }

    </style>
       
    <main class="main">
        <header class="header">
            <p id="head"> QUIZZ</p>
        </header>
        <div class="container">
            <section class="quiz-section">
                
            </section>
            <section class="home">
                <div class="quiz-cont">
                    <h1>Quiz Content</h1>
                    <p>Are you ready to challenge yourself and explore a world of knowledge? Welcome to <bold>QUIZZ</bold>, where you can customize your quiz experience to match your interests and skill level!</p>
                    <button class="select-quiz">Select Quiz</button>

                </div>
            </section>
        </div>

    </main>
    <div class="popup-select">
        <h2>Select your Interest and Skill</h2>
        <form class="selects">
            <label for="cat">Category: </label>
            <select name="category" id="cat">
                <option value="music">Music</option>
                <option value="film">Film</option>
                <option value="computers">Computers</option>
            </select>
            <br/>
            <br/>
            <label for="diff">Difficulty Level:  </label>
            <select name="difficulty" id="diff">
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
            </select>
            <br>
            <button class="exit" id="but"> EXIT QUIZ</button>
            <input type="button" class="sub" id="but" value="START QUIZ" onclick="submitForm()">
        </form>

    </div>
    
    

    <script>
         const selectBtn=document.querySelector('.select-quiz')
        const popSelect=document.querySelector('.popup-select')
        const main=document.querySelector('.main');
        const startQuiz=document.querySelector('.sub');
        const quizSection=document.querySelector('.quiz-section');
        selectBtn.onclick=()=>{
            popSelect.classList.add('active');
            main.classList.add('active');
        }
        // startQuiz.onclick=()=>{
        //     quizSection.classList.add('active');
        //     popSelect.classList.remove('active');
        //     main.classList.remove('active');
        // }
        let cat = document.getElementById("cat");
        let diff = document.getElementById("diff");

        const category_obj = {
            "film": 11,
            "music": 12,
            "computers": 18
        };

        function submitForm() {
            let category = cat.options[cat.selectedIndex].value;
            let difficulty = diff.options[diff.selectedIndex].value;
            let url = `https://opentdb.com/api.php?amount=40&category=${category_obj[category]}&difficulty=${difficulty}&type=multiple`;
            fetchQuestions(url);
        }

        function fetchQuestions(url) {
            fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                let questions = data.results;
                let selectedQuestions = [];
                let indexes = new Set();

                while (indexes.size < 10) {
                    let index = Math.floor(Math.random() * questions.length);
                    if (!indexes.has(index)) {
                        indexes.add(index);
                        selectedQuestions.push(questions[index]);
                    }
                }

                console.log(selectedQuestions);
                console.log(options(selectedQuestions,1));
            
            })
            .catch(error => {
                console.error('problem in fetch operation:', error);
            });
        }
        function options(arr, ind) {
    const options = [];
    // Push correct answer first
    options.push(arr[ind].correct_answer);
    // Push incorrect answers
    options.push(...arr[ind].incorrect_answers);

    // Shuffle options
    for (let i = options.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [options[i], options[j]] = [options[j], options[i]];
    }

    return options;
}

    </script>
</body>
</html>
